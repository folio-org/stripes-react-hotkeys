/**
 * Copyright (c) 2015 Chris Pearce <hello@chrispearce.me>
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 */

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("react-dom"),require("prop-types"),require("lodash/isEqual"),require("lodash/isBoolean"),require("lodash/isArray"),require("lodash/omit")):"function"==typeof define&&define.amd?define(["exports","react","react-dom","prop-types","lodash/isEqual","lodash/isBoolean","lodash/isArray","lodash/omit"],t):t((e=e||self).ReactHotkeys={},e.React,e.ReactDOM,e.PropTypes,e.lodash.isEqual,e.lodash.isBoolean,e.lodash.isArray,e.lodash.omit)}(this,function(e,o,i,t,l,r,s,a){"use strict";function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function p(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,o=arguments[t];for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e}).apply(this,arguments)}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t){if(null==e)return{};var n,o=function(e,t){if(null==e)return{};for(var n,o={},i=Object.keys(e),r=0;r<i.length;r++)n=i[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var i=Object.getOwnPropertySymbols(e),r=0;r<i.length;r++)n=i[r],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n]);return o}function K(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(n){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=b(n);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return K(e)}(this,o?(e=b(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}o=o&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o,i=i&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i,t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t,l=l&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l,r=r&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r,s=s&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s,a=a&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a;var v=["component","children","noWrapper","element"],C=function(){f(n,o.Component);var t=g(n);function n(e){return c(this,n),(e=t.call(this,e)).focusListener,e.blurListener,e.willWrap=!e.props.noWrapper,e.setupNativeListeners=e.setupNativeListeners.bind(K(e)),e.removeNativeListeners=e.removeNativeListeners.bind(K(e)),e}return p(n,[{key:"componentDidMount",value:function(){!this.willWrap&&this.props.element&&this.setupNativeListeners()}},{key:"componentDidUpdate",value:function(e){!e.element&&this.props.element&&this.setupNativeListeners()}},{key:"componentWillUnmount",value:function(){this.removeNativeListeners()}},{key:"setupNativeListeners",value:function(){var e,t,n,o,i,r,s,a,l,d,c;this.focusListener||(e=(n=this.props).onFocus,t=n.onBlur,(n=n.element)&&!this.focusListener?(n.getAttribute("tabindex")||n.setAttribute("tabindex","-1"),this.focusListener=(a=n,l=e,c="onfocusin"in document?!(d="focusin"):(d="focus",!0),a.addEventListener(d,l,c),{remove:function(){return a.removeEventListener(d,l,c)}}),this.blurListener=(o=n,i=t,s="onfocusout"in document?!(r="focusout"):(r="blur",!0),o.addEventListener(r,i,s),{remove:function(){return o.removeEventListener(r,i,s)}})):this.willWrap=!0)}},{key:"removeNativeListeners",value:function(){this.focusListener&&(this.focusListener.remove(),this.focusListener=null),this.blurListener&&(this.blurListener.remove(),this.blurListener=null)}},{key:"render",value:function(){var e=this.props,t=e.component,n=e.children,e=(e.noWrapper,e.element,m(e,v));return this.willWrap?o.createElement(t,y({tabIndex:"-1"},e),n):n}}]),n}();function _(e,t){if(e&&t){if(e.contains)return e.contains(t);if(e.compareDocumentPosition)return e===t||16===e.compareDocumentPosition(t)}}h(C,"propTypes",{onFocus:t.func,onBlur:t.func,component:t.any,noWrapper:t.bool,children:t.node}),h(C,"defaultProps",{component:"div"});var k=o.createContext({hotKeyParent:null,hotKeyMap:{}}),w=k.Provider,M="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function x(e){this.sourceStr=e,this.subCombos=x.parseComboStr(e),this.keyNames=this.subCombos.reduce(function(e,t){return e.concat(t)},[])}x.sequenceDeliminator=">>",x.comboDeliminator=">",x.keyDeliminator="+",x.parseComboStr=function(e){for(var t=x._splitStr(e,x.comboDeliminator),n=[],o=0;o<t.length;o+=1)n.push(x._splitStr(t[o],x.keyDeliminator));return n},x.prototype.check=function(e){for(var t=0,n=0;n<this.subCombos.length;n+=1)if(-1===(t=this._checkSubCombo(this.subCombos[n],t,e)))return!1;return!0},x.prototype.isEqual=function(e){if(!e||"string"!=typeof e&&"object"!=typeof e)return!1;if("string"==typeof e&&(e=new x(e)),this.subCombos.length!==e.subCombos.length)return!1;for(var t=0;t<this.subCombos.length;t+=1)if(this.subCombos[t].length!==e.subCombos[t].length)return!1;for(t=0;t<this.subCombos.length;t+=1){for(var n=this.subCombos[t],o=e.subCombos[t].slice(0),i=0;i<n.length;i+=1){var r=n[i],r=o.indexOf(r);-1<r&&o.splice(r,1)}if(0!==o.length)return!1}return!0},x._splitStr=function(e,t){for(var n=e,o=t,i="",r=[],s=0;s<n.length;s+=1)0<s&&n[s]===o&&"\\"!==n[s-1]&&(r.push(i.trim()),i="",s+=1),i+=n[s];return i&&r.push(i.trim()),r},x.prototype._checkSubCombo=function(e,t,n){e=e.slice(0),n=n.slice(t);for(var o=t,i=0;i<e.length;i+=1){var r,s=e[i];"\\"===s[0]&&((r=s.slice(1))!==x.comboDeliminator&&r!==x.keyDeliminator||(s=r));s=n.indexOf(s);if(-1<s&&(e.splice(i,1),--i,o<s&&(o=s),0===e.length))return o}return-1};var E=x;function O(e){this.localeName=e,this.pressedKeys=[],this._appliedMacros=[],this._keyMap={},this._killKeyCodes=[],this._macros=[]}O.prototype.bindKeyCode=function(e,t){this._keyMap[e]=t="string"==typeof t?[t]:t},O.prototype.bindMacro=function(e,t){var n=null;"function"==typeof(t="string"==typeof t?[t]:t)&&(n=t,t=null);n={keyCombo:new E(e),keyNames:t,handler:n};this._macros.push(n)},O.prototype.getKeyCodes=function(e){var t,n=[];for(t in this._keyMap)-1<this._keyMap[t].indexOf(e)&&n.push(0|t);return n},O.prototype.getKeyNames=function(e){return this._keyMap[e]||[]},O.prototype.setKillKey=function(e){if("string"!=typeof e)this._killKeyCodes.push(e);else for(var t=this.getKeyCodes(e),n=0;n<t.length;n+=1)this.setKillKey(t[n])},O.prototype.pressKey=function(e){if("string"!=typeof e){for(var t=this.getKeyNames(e),n=0;n<t.length;n+=1)-1===this.pressedKeys.indexOf(t[n])&&this.pressedKeys.push(t[n]);this._applyMacros()}else for(var o=this.getKeyCodes(e),n=0;n<o.length;n+=1)this.pressKey(o[n])},O.prototype.releaseKey=function(e){if("string"==typeof e)for(var t=this.getKeyCodes(e),n=0;n<t.length;n+=1)this.releaseKey(t[n]);else{var o=this.getKeyNames(e);if(-1<this._killKeyCodes.indexOf(e))this.pressedKeys.length=0;else for(n=0;n<o.length;n+=1){var i=this.pressedKeys.indexOf(o[n]);-1<i&&this.pressedKeys.splice(i,1)}this._clearMacros()}},O.prototype._applyMacros=function(){for(var e=this._macros.slice(0),t=0;t<e.length;t+=1){var n=e[t];if(n.keyCombo.check(this.pressedKeys)){n.handler&&(n.keyNames=n.handler(this.pressedKeys));for(var o=0;o<n.keyNames.length;o+=1)-1===this.pressedKeys.indexOf(n.keyNames[o])&&this.pressedKeys.push(n.keyNames[o]);this._appliedMacros.push(n)}}},O.prototype._clearMacros=function(){for(var e=0;e<this._appliedMacros.length;e+=1){var t=this._appliedMacros[e];if(!t.keyCombo.check(this.pressedKeys)){for(var n=0;n<t.keyNames.length;n+=1){var o=this.pressedKeys.indexOf(t.keyNames[n]);-1<o&&this.pressedKeys.splice(o,1)}t.handler&&(t.keyNames=null),this._appliedMacros.splice(e,1),--e}}};var H=O;function L(e,t,n,o){this._locale=null,this._currentContext=null,this._contexts={},this._listeners=[],this._appliedListeners=[],this._locales={},this._targetElement=null,this._targetWindow=null,this._targetPlatform="",this._targetUserAgent="",this._isModernBrowser=!1,this._targetKeyDownBinding=null,this._targetKeyUpBinding=null,this._targetResetBinding=null,this._paused=!1,this._callerHandler=null,this.setContext("global"),this.watch(e,t,n,o)}L.prototype.setLocale=function(e,t){var n=null;"string"==typeof e?t?t(n=new H(e),this._targetPlatform,this._targetUserAgent):n=this._locales[e]||null:e=(n=e)._localeName,this._locale=n,(this._locales[e]=n)&&(this._locale.pressedKeys=n.pressedKeys)},L.prototype.getLocale=function(e){return e=e||this._locale.localeName,this._locales[e]||null},L.prototype.bind=function(e,t,n,o){if(null!==e&&"function"!=typeof e||(o=n,n=t,t=e,e=null),e&&"object"==typeof e&&"number"==typeof e.length)for(var i=0;i<e.length;i+=1)this.bind(e[i],t,n);else this._listeners.push({keyCombo:e?new E(e):null,pressHandler:t||null,releaseHandler:n||null,preventRepeat:o||!1,preventRepeatByDefault:o||!1})},L.prototype.addListener=L.prototype.bind,L.prototype.on=L.prototype.bind,L.prototype.unbind=function(e,t,n){if(null!==e&&"function"!=typeof e||(n=t,t=e,e=null),e&&"object"==typeof e&&"number"==typeof e.length)for(var o=0;o<e.length;o+=1)this.unbind(e[o],t,n);else for(o=0;o<this._listeners.length;o+=1){var i=this._listeners[o],r=!e&&!i.keyCombo||i.keyCombo&&i.keyCombo.isEqual(e),s=!t&&!n||!t&&!i.pressHandler||t===i.pressHandler,i=!t&&!n||!n&&!i.releaseHandler||n===i.releaseHandler;r&&s&&i&&(this._listeners.splice(o,1),--o)}},L.prototype.removeListener=L.prototype.unbind,L.prototype.off=L.prototype.unbind,L.prototype.setContext=function(e){this._locale&&this.releaseAllKeys(),this._contexts[e]||(this._contexts[e]=[]),this._listeners=this._contexts[e],this._currentContext=e},L.prototype.getContext=function(){return this._currentContext},L.prototype.withContext=function(e,t){var n=this.getContext();this.setContext(e),t(),this.setContext(n)},L.prototype.watch=function(e,t,n,o){var i=this;if(this.stop(),!e){if(!M.addEventListener&&!M.attachEvent)throw new Error("Cannot find global functions addEventListener or attachEvent.");e=M}if("number"==typeof e.nodeType&&(o=n,n=t,t=e,e=M),!e.addEventListener&&!e.attachEvent)throw new Error("Cannot find addEventListener or attachEvent methods on targetWindow.");this._isModernBrowser=!!e.addEventListener;var r=e.navigator&&e.navigator.userAgent||"",s=e.navigator&&e.navigator.platform||"";t&&null!==t||(t=e.document),n&&null!==n||(n=s),o&&null!==o||(o=r),this._targetKeyDownBinding=function(e){i.pressKey(e.keyCode,e),i._handleCommandBug(e,s)},this._targetKeyUpBinding=function(e){i.releaseKey(e.keyCode,e)},this._targetResetBinding=function(e){i.releaseAllKeys(e)},this._bindEvent(t,"keydown",this._targetKeyDownBinding),this._bindEvent(t,"keyup",this._targetKeyUpBinding),this._bindEvent(e,"focus",this._targetResetBinding),this._bindEvent(e,"blur",this._targetResetBinding),this._targetElement=t,this._targetWindow=e,this._targetPlatform=n,this._targetUserAgent=o},L.prototype.stop=function(){this._targetElement&&this._targetWindow&&(this._unbindEvent(this._targetElement,"keydown",this._targetKeyDownBinding),this._unbindEvent(this._targetElement,"keyup",this._targetKeyUpBinding),this._unbindEvent(this._targetWindow,"focus",this._targetResetBinding),this._unbindEvent(this._targetWindow,"blur",this._targetResetBinding),this._targetWindow=null,this._targetElement=null)},L.prototype.pressKey=function(e,t){if(!this._paused){if(!this._locale)throw new Error("Locale not set");this._locale.pressKey(e),this._applyBindings(t)}},L.prototype.releaseKey=function(e,t){if(!this._paused){if(!this._locale)throw new Error("Locale not set");this._locale.releaseKey(e),this._clearBindings(t)}},L.prototype.releaseAllKeys=function(e){if(!this._paused){if(!this._locale)throw new Error("Locale not set");this._locale.pressedKeys.length=0,this._clearBindings(e)}},L.prototype.pause=function(){this._paused||(this._locale&&this.releaseAllKeys(),this._paused=!0)},L.prototype.resume=function(){this._paused=!1},L.prototype.reset=function(){this.releaseAllKeys(),this._listeners.length=0},L.prototype._bindEvent=function(e,t,n){return this._isModernBrowser?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)},L.prototype._unbindEvent=function(e,t,n){return this._isModernBrowser?e.removeEventListener(t,n,!1):e.detachEvent("on"+t,n)},L.prototype._getGroupedListeners=function(){var o=[],i=[],e=this._listeners;return(e="global"!==this._currentContext?[].concat(e,this._contexts.global):e).sort(function(e,t){return(t.keyCombo?t.keyCombo.keyNames.length:0)-(e.keyCombo?e.keyCombo.keyNames.length:0)}).forEach(function(e){for(var t=-1,n=0;n<i.length;n+=1)(null===i[n]&&null===e.keyCombo||null!==i[n]&&i[n].isEqual(e.keyCombo))&&(t=n);-1===t&&(t=i.length,i.push(e.keyCombo)),o[t]||(o[t]=[]),o[t].push(e)}),o},L.prototype._applyBindings=function(e){var t=!1;(e=e||{}).preventRepeat=function(){t=!0},e.pressedKeys=this._locale.pressedKeys.slice(0);for(var n=this._locale.pressedKeys.slice(0),o=this._getGroupedListeners(),i=0;i<o.length;i+=1){var r=o[i],s=r[0].keyCombo;if(null===s||s.check(n)){for(var a=0;a<r.length;a+=1){var l=r[a];(l=null===s?{keyCombo:new E(n.join("+")),pressHandler:l.pressHandler,releaseHandler:l.releaseHandler,preventRepeat:l.preventRepeat,preventRepeatByDefault:l.preventRepeatByDefault}:l).pressHandler&&!l.preventRepeat&&(l.pressHandler.call(this,e),t&&(l.preventRepeat=t,t=!1)),l.releaseHandler&&-1===this._appliedListeners.indexOf(l)&&this._appliedListeners.push(l)}if(s)for(a=0;a<s.keyNames.length;a+=1){var d=n.indexOf(s.keyNames[a]);-1!==d&&(n.splice(d,1),--a)}}}},L.prototype._clearBindings=function(e){e=e||{};for(var t=0;t<this._appliedListeners.length;t+=1){var n=this._appliedListeners[t],o=n.keyCombo;null!==o&&o.check(this._locale.pressedKeys)||(this._callerHandler!==n.releaseHandler&&(o=this._callerHandler,this._callerHandler=n.releaseHandler,n.preventRepeat=n.preventRepeatByDefault,n.releaseHandler.call(this,e),this._callerHandler=o),this._appliedListeners.splice(t,1),--t)}},L.prototype._handleCommandBug=function(e,t){t.match("Mac")&&this._locale.pressedKeys.includes("command")&&!["shift","ctrl","alt","capslock","tab","command"].includes(this._locale.getKeyNames(e.keyCode)[0])&&this._targetKeyUpBinding(e)};function j(e,t,n){e.bindKeyCode(3,["cancel"]),e.bindKeyCode(8,["backspace"]),e.bindKeyCode(9,["tab"]),e.bindKeyCode(12,["clear"]),e.bindKeyCode(13,["enter"]),e.bindKeyCode(16,["shift"]),e.bindKeyCode(17,["ctrl"]),e.bindKeyCode(18,["alt","menu"]),e.bindKeyCode(19,["pause","break"]),e.bindKeyCode(20,["capslock"]),e.bindKeyCode(27,["escape","esc"]),e.bindKeyCode(32,["space","spacebar"]),e.bindKeyCode(33,["pageup"]),e.bindKeyCode(34,["pagedown"]),e.bindKeyCode(35,["end"]),e.bindKeyCode(36,["home"]),e.bindKeyCode(37,["left"]),e.bindKeyCode(38,["up"]),e.bindKeyCode(39,["right"]),e.bindKeyCode(40,["down"]),e.bindKeyCode(41,["select"]),e.bindKeyCode(42,["printscreen"]),e.bindKeyCode(43,["execute"]),e.bindKeyCode(44,["snapshot"]),e.bindKeyCode(45,["insert","ins"]),e.bindKeyCode(46,["delete","del"]),e.bindKeyCode(47,["help"]),e.bindKeyCode(145,["scrolllock","scroll"]),e.bindKeyCode(188,["comma",","]),e.bindKeyCode(190,["period","."]),e.bindKeyCode(191,["slash","forwardslash","/"]),e.bindKeyCode(192,["graveaccent","`"]),e.bindKeyCode(219,["openbracket","["]),e.bindKeyCode(220,["backslash","\\"]),e.bindKeyCode(221,["closebracket","]"]),e.bindKeyCode(222,["apostrophe","'"]),e.bindKeyCode(48,["zero","0"]),e.bindKeyCode(49,["one","1"]),e.bindKeyCode(50,["two","2"]),e.bindKeyCode(51,["three","3"]),e.bindKeyCode(52,["four","4"]),e.bindKeyCode(53,["five","5"]),e.bindKeyCode(54,["six","6"]),e.bindKeyCode(55,["seven","7"]),e.bindKeyCode(56,["eight","8"]),e.bindKeyCode(57,["nine","9"]),e.bindKeyCode(96,["numzero","num0"]),e.bindKeyCode(97,["numone","num1"]),e.bindKeyCode(98,["numtwo","num2"]),e.bindKeyCode(99,["numthree","num3"]),e.bindKeyCode(100,["numfour","num4"]),e.bindKeyCode(101,["numfive","num5"]),e.bindKeyCode(102,["numsix","num6"]),e.bindKeyCode(103,["numseven","num7"]),e.bindKeyCode(104,["numeight","num8"]),e.bindKeyCode(105,["numnine","num9"]),e.bindKeyCode(106,["nummultiply","num*"]),e.bindKeyCode(107,["numadd","num+"]),e.bindKeyCode(108,["numenter"]),e.bindKeyCode(109,["numsubtract","num-"]),e.bindKeyCode(110,["numdecimal","num."]),e.bindKeyCode(111,["numdivide","num/"]),e.bindKeyCode(144,["numlock","num"]),e.bindKeyCode(112,["f1"]),e.bindKeyCode(113,["f2"]),e.bindKeyCode(114,["f3"]),e.bindKeyCode(115,["f4"]),e.bindKeyCode(116,["f5"]),e.bindKeyCode(117,["f6"]),e.bindKeyCode(118,["f7"]),e.bindKeyCode(119,["f8"]),e.bindKeyCode(120,["f9"]),e.bindKeyCode(121,["f10"]),e.bindKeyCode(122,["f11"]),e.bindKeyCode(123,["f12"]),e.bindMacro("shift + `",["tilde","~"]),e.bindMacro("shift + 1",["exclamation","exclamationpoint","!"]),e.bindMacro("shift + 2",["at","@"]),e.bindMacro("shift + 3",["number","#"]),e.bindMacro("shift + 4",["dollar","dollars","dollarsign","$"]),e.bindMacro("shift + 5",["percent","%"]),e.bindMacro("shift + 6",["caret","^"]),e.bindMacro("shift + 7",["ampersand","and","&"]),e.bindMacro("shift + 8",["asterisk","*"]),e.bindMacro("shift + 9",["openparen","("]),e.bindMacro("shift + 0",["closeparen",")"]),e.bindMacro("shift + -",["underscore","_"]),e.bindMacro("shift + =",["plus","+"]),e.bindMacro("shift + [",["opencurlybrace","opencurlybracket","{"]),e.bindMacro("shift + ]",["closecurlybrace","closecurlybracket","}"]),e.bindMacro("shift + \\",["verticalbar","|"]),e.bindMacro("shift + ;",["colon",":"]),e.bindMacro("shift + '",["quotationmark","'"]),e.bindMacro("shift + !,",["openanglebracket","<"]),e.bindMacro("shift + .",["closeanglebracket",">"]),e.bindMacro("shift + /",["questionmark","?"]),t.match("Mac")?e.bindMacro("command",["mod","modifier"]):e.bindMacro("ctrl",["mod","modifier"]);for(var o=65;o<=90;o+=1){var i=String.fromCharCode(o+32),r=String.fromCharCode(o);e.bindKeyCode(o,i),e.bindMacro("shift + "+i,r),e.bindMacro("capslock + "+i,r)}var s,a,l=n.match("Firefox")?59:186,d=n.match("Firefox")?173:189,c=n.match("Firefox")?61:187;t.match("Mac")&&(n.match("Safari")||n.match("Chrome"))?(s=91,a=93):t.match("Mac")&&n.match("Opera")?a=s=17:t.match("Mac")&&n.match("Firefox")&&(a=s=224),e.bindKeyCode(l,["semicolon",";"]),e.bindKeyCode(d,["dash","-"]),e.bindKeyCode(c,["equal","equalsign","="]),e.bindKeyCode(s,["command","windows","win","super","leftcommand","leftwindows","leftwin","leftsuper"]),e.bindKeyCode(a,["command","windows","win","super","rightcommand","rightwindows","rightwin","rightsuper"]),e.setKillKey("command")}function B(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},t=S(n,e,t);return l(t,o)?null:t}function P(e,o,i,t){Object.keys(i).forEach(function(n){q(n,t).forEach(function(t){i[n]&&-1===e.findIndex(function(e){return e.keyCombo===t})&&e.push({keyCombo:t,fn:function(e){o(e,i[n],t)}})})})}var N=L,S=function(){return Object.assign({},0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},2<arguments.length&&void 0!==arguments[2]?arguments[2]:{})},q=function e(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=n?n[t]:null;return n?s(n)?n:"object"===d(n)?e("sequence",n):[n]:null===n?[]:[t]},D=function(){f(n,o.Component);var t=g(n);function n(e){var a;c(this,n),h(K(a=t.call(this,e)),"handlerWrapper",function(e,t,n){var o=a.props.focused,i=a.isFocused;r(o)?_(a.attachment,e.target)&&(i=o):"function"==typeof o&&(i=o()),i&&n!==a.lastChildSequence&&(a.props.HKcontext.hotKeyParent&&a.props.HKcontext.hotKeyParent.childHandledSequence(n),t(e))}),h(K(a),"updateHotKeys",function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},o=a.props,i=o.handlers,r=void 0===i?{}:i,s=o.keyMap,i=o.HKcontext,o=a.state.HKcontext.hotKeyMap,t=t.handlers||{};!e&&!B((void 0===i?{}:i).hotKeyMap,o,s,null==n?void 0:n.HKcontext.hotKeyMap)&&l(r,t)||(a.keyboardjs.stop(),a.keyboardjs.reset(),a.localKeybindings=[],P(a.localKeybindings,a.handlerWrapper,r,s),P(a.localKeybindings,a.handlerWrapper,r,o),0!==a.localKeybindings.length&&(a.localKeybindings.forEach(function(e){a.keyboardjs.on(e.keyCombo,e.fn)}),a.keyboardjs.watch(a.attachment)))}),h(K(a),"childHandledSequence",function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t=a.props.HKcontext.hotKeyParent;a.lastChildSequence=e,t&&t.childHandledSequence(e)}),h(K(a),"onFocus",function(){var e;a.isFocused=!0,a.props.onFocus&&(e=a.props).onFocus.apply(e,arguments)}),h(K(a),"onBlur",function(){var e=a.props,t=e.HKcontext.hotKeyParent,e=e.onBlur;a.isFocused=!1,e&&e.apply(void 0,arguments),a.keyboardjs.releaseAllKeys(),t&&t.childHandledSequence(null)});e=K(a).childHandledSequence;return a.state={timestamp:void 0,HKcontext:{hotKeyParent:{childHandledSequence:e},hotKeyMap:{}}},a.keyboardjs=null,a.isFocused=!1,a.lastChildSequence=null,a.localKeybindings=[],a}return p(n,[{key:"componentDidMount",value:function(){var e=this.props.attach;this.attachment=e?null!=e&&e.current?e.current:e:i.findDOMNode(this),this.keyboardjs=new N(this.attachment),this.keyboardjs.setLocale("us",j),this.updateHotKeys(!0),_(this.attachment,document.activeElement)&&(this.isFocused=!0),void 0===e&&this.forceUpdate()}},{key:"componentDidUpdate",value:function(e,t){this.updateHotKeys(!1,e,t),l(e.keyMap,this.props.keyMap)||this.setState({timeStamp:(new Date).getTime()})}},{key:"componentWillUnmount",value:function(){var e=this.props.HKcontext.hotKeyParent;e&&e.childHandledSequence(null),this.keyboardjs&&(this.keyboardjs.stop(),this.localKeybindings=[])}},{key:"render",value:function(){var e=this.props.children,t=a(this.props,"keyMap","handlers","focused","attach","HKcontext");return o.createElement(w,{value:this.state.HKcontext},o.createElement(C,y({},t,{onFocus:this.onFocus,onBlur:this.onBlur,element:this.attachment}),e))}}],[{key:"getDerivedStateFromProps",value:function(e,t){e=B(e.HKcontext.hotKeyMap,e.keyMap,{},t.HKcontext.hotKeyMap);return e?{HKcontext:Object.assign({},t.HKcontext,{hotKeyMap:e})}:null}}]),n}();h(D,"propTypes",{HKcontext:t.object,keyMap:t.object,handlers:t.object});var R,t=(W.displayName="HotKeys-".concat((R=D).displayName||R.name||"Component"),W);function W(t){return o.createElement(k.Consumer,null,function(e){return o.createElement(R,y({HKcontext:e},t))})}e.FocusTrap=C,e.HotKeys=t,Object.defineProperty(e,"__esModule",{value:!0})});
